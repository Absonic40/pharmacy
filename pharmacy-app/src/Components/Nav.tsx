import React, { useState } from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import '../Styles/Nav.css';

// Import images
import logo from '../Image/Home/logo.png';

// تعریف آیتم‌های منو
const navItems = [
  {
    title: 'صفحه اصلی', // عنوان آیتم
    path: '/dashboard', // مسیر صفحه
    icon: ( // آیکون آیتم
      <svg className="nav-home-icon" width="24" height="23" viewBox="0 0 24 23" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path strokeWidth="1" d="M2.87145 14.8197L3.58474 14.5879L2.87145 14.8197ZM1.76094 8.65157L2.48225 8.85703L1.76094 8.65157ZM6.39816 3.96556L5.95732 3.3588L6.39816 3.96556ZM1.87423 8.30291L2.57855 8.56067L1.87423 8.30291ZM5.89513 20.678L5.47683 21.3005L5.89513 20.678ZM5.59854 20.4625L5.13576 21.0527L5.59854 20.4625ZM21.3375 14.8197L20.6243 14.5879L21.3375 14.8197ZM18.6105 20.4625L19.0732 21.0527L18.6105 20.4625ZM18.3139 20.678L18.7322 21.3005L18.3139 20.678ZM17.8108 3.96556L18.2517 3.3588L17.8108 3.96556ZM22.3348 8.30291L21.6304 8.56067L22.3348 8.30291ZM22.4481 8.65157L21.7267 8.85703L22.4481 8.65157ZM12.2878 1.00336L12.2603 1.75286L12.2878 1.00336ZM11.9212 1.00336L11.9487 1.75286L11.9212 1.00336ZM11.3545 18.8197C11.3545 19.2339 11.6903 19.5697 12.1045 19.5697C12.5187 19.5697 12.8545 19.2339 12.8545 18.8197H11.3545ZM12.8545 16.8197C12.8545 16.4054 12.5187 16.0697 12.1045 16.0697C11.6903 16.0697 11.3545 16.4054 11.3545 16.8197H12.8545ZM16.1045 21.4063L16.1947 22.1509L16.1045 21.4063ZM3.58474 14.5879C3.07039 13.0049 2.704 11.874 2.51174 10.9558C2.3231 10.055 2.31903 9.43007 2.48225 8.85703L1.03963 8.44611C0.785414 9.33861 0.827277 10.2303 1.04359 11.2633C1.25629 12.2791 1.65388 13.4994 2.15815 15.0514L3.58474 14.5879ZM5.95732 3.3588C4.6371 4.31799 3.59814 5.07158 2.829 5.76835C2.04681 6.47693 1.48884 7.17368 1.16991 8.04515L2.57855 8.56067C2.78332 8.00112 3.15391 7.49798 3.83606 6.88002C4.53125 6.25026 5.4924 5.55068 6.839 4.57232L5.95732 3.3588ZM2.48225 8.85703C2.51072 8.7571 2.54284 8.65824 2.57855 8.56067L1.16991 8.04515C1.1216 8.17717 1.07814 8.31091 1.03963 8.44611L2.48225 8.85703ZM2.15815 15.0514C2.66243 16.6034 3.05809 17.8244 3.48307 18.7712C3.91526 19.7341 4.40549 20.4801 5.13576 21.0527L6.06133 19.8723C5.59245 19.5046 5.22845 18.9967 4.85154 18.157C4.46742 17.3012 4.09909 16.1709 3.58474 14.5879L2.15815 15.0514ZM6.31343 20.0555C6.22718 19.9975 6.14309 19.9364 6.06133 19.8723L5.13576 21.0527C5.24638 21.1394 5.36015 21.2221 5.47683 21.3005L6.31343 20.0555ZM20.6243 14.5879C20.1099 16.1709 19.7416 17.3012 19.3575 18.157C18.9805 18.9967 18.6165 19.5046 18.1477 19.8723L19.0732 21.0527C19.8035 20.4801 20.2937 19.7341 20.7259 18.7712C21.1509 17.8244 21.5466 16.6034 22.0508 15.0514L20.6243 14.5879ZM18.1477 19.8723C18.0659 19.9364 17.9818 19.9975 17.8956 20.0555L18.7322 21.3005C18.8488 21.2221 18.9626 21.1394 19.0732 21.0527L18.1477 19.8723ZM17.37 4.57232C18.7166 5.55068 19.6777 6.25026 20.3729 6.88002C21.0551 7.49798 21.4257 8.00112 21.6304 8.56067L23.0391 8.04515C22.7202 7.17368 22.1622 6.47693 21.38 5.76835C20.6109 5.07158 19.5719 4.31799 18.2517 3.3588L17.37 4.57232ZM22.0508 15.0514C22.5551 13.4994 22.9527 12.2791 23.1654 11.2633C23.3817 10.2303 23.4236 9.33861 23.1694 8.44611L21.7267 8.85703C21.89 9.43007 21.8859 10.055 21.6973 10.9558C21.505 11.874 21.1386 13.0049 20.6243 14.5879L22.0508 15.0514ZM21.6304 8.56067C21.6662 8.65824 21.6983 8.75709 21.7267 8.85703L23.1694 8.44611C23.1309 8.31091 23.0874 8.17717 23.0391 8.04515L21.6304 8.56067ZM18.2517 3.3588C16.9315 2.3996 15.8937 1.64436 14.9934 1.12818C14.0777 0.603234 13.2427 0.287886 12.3153 0.253865L12.2603 1.75286C12.8557 1.7747 13.4488 1.97167 14.2473 2.42948C15.0611 2.89603 16.0234 3.59396 17.37 4.57232L18.2517 3.3588ZM6.839 4.57232C8.18559 3.59396 9.14794 2.89603 9.96171 2.42948C10.7602 1.97167 11.3533 1.7747 11.9487 1.75286L11.8937 0.253865C10.9663 0.287886 10.1313 0.603234 9.21564 1.12818C8.3153 1.64436 7.27754 2.3996 5.95732 3.3588L6.839 4.57232ZM12.3153 0.253865C12.1748 0.248712 12.0342 0.248712 11.8937 0.253865L11.9487 1.75286C12.0525 1.74905 12.1565 1.74905 12.2603 1.75286L12.3153 0.253865ZM15.3545 16.8197V20.8197H16.8545V16.8197H15.3545ZM8.8545 20.8197V16.8197H7.3545V20.8197H8.8545ZM12.1045 13.5697C13.8994 13.5697 15.3545 15.0247 15.3545 16.8197H16.8545C16.8545 14.1963 14.7278 12.0697 12.1045 12.0697V13.5697ZM12.1045 12.0697C9.48115 12.0697 7.3545 14.1963 7.3545 16.8197H8.8545C8.8545 15.0247 10.3096 13.5697 12.1045 13.5697V12.0697ZM12.8545 18.8197V16.8197H11.3545V18.8197H12.8545ZM12.1045 22.2779C13.8096 22.2779 15.1359 22.2791 16.1947 22.1509L16.0143 20.6618C15.0666 20.7766 13.8469 20.7779 12.1045 20.7779V22.2779ZM16.1947 22.1509C17.1802 22.0315 17.9975 21.7942 18.7322 21.3005L17.8956 20.0555C17.4234 20.3727 16.8594 20.5594 16.0143 20.6618L16.1947 22.1509ZM15.3545 20.8197V21.4063H16.8545V20.8197H15.3545ZM12.1045 20.7779C10.3621 20.7779 9.14238 20.7766 8.19469 20.6618L8.0143 22.1509C9.07305 22.2791 10.3994 22.2779 12.1045 22.2779V20.7779ZM8.19469 20.6618C7.34963 20.5594 6.78556 20.3727 6.31343 20.0555L5.47683 21.3005C6.21154 21.7942 7.02882 22.0315 8.0143 22.1509L8.19469 20.6618ZM7.3545 20.8197V21.4063H8.8545V20.8197H7.3545Z" fill="#059784" />
      </svg>
    )
  },
  {
    title: 'ایجاد کد جدید',
    path: '/patient/register',
    icon: (
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g id="Add Circle">
          <path id="Vector" d="M8 11H14M11 14V8M21 11C21 16.5228 16.5228 21 11 21C5.47715 21 1 16.5228 1 11C1 5.47715 5.47715 1 11 1C16.5228 1 21 5.47715 21 11Z" stroke="#059784" stroke-width="1.5" stroke-linecap="round" />
        </g>
      </svg>
    )
  },
  {
    title: 'ارتباط با ما',
    path: '/prescription/new',
    icon: (
      <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_2217_535)">
          <path d="M6.09998 17.0679H4.79999C3.80999 17.0679 3 16.2579 3 15.2679V11.9679C3 11.4779 3.41002 11.0679 3.90002 11.0679H6.09998C6.59998 11.0679 7 11.4779 7 11.9679V16.1679C7 16.6679 6.59998 17.0679 6.09998 17.0679V17.0679Z" stroke="#059784" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" />
          <path d="M5 11.0779V10.0679C5 6.19787 8.13 3.06787 12 3.06787C15.87 3.06787 19 6.19787 19 10.0679V11.0679" stroke="#059784" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" />
          <path d="M13 21.0779H14C16.42 21.0779 18.44 19.3579 18.9 17.0679" stroke="#059784" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" />
          <path d="M19.15 17.0679H17.9C17.4 17.0679 17 16.6579 17 16.1679V11.9679C17 11.4779 17.41 11.0679 17.9 11.0679H20.1C20.6 11.0679 21 11.4779 21 11.9679V15.2179C21 16.2379 20.17 17.0679 19.15 17.0679Z" stroke="#059784" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" />
        </g>
        <defs>
          <clipPath id="clip0_2217_535">
            <rect width="24" height="24" fill="white" transform="translate(0 0.0776367)" />
          </clipPath>
        </defs>
      </svg>
    )
  },
  {
    title: 'خروج',
    path: '/', // به صفحه ورود برمی‌گردد
    icon: (
      <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M14 3.07764V3.82764V3.07764ZM15 3.07764V2.32764V3.07764ZM21 9.07764H21.75H21ZM21 15.0776H20.25H21ZM15 21.0776V21.8276V21.0776ZM14 21.0776V20.3276V21.0776ZM20.9384 16.8598L21.6792 16.9771V16.9771L20.9384 16.8598ZM16.7822 21.0161L16.6648 20.2753L16.7822 21.0161ZM16.7822 3.13919L16.8995 2.39843L16.8995 2.39843L16.7822 3.13919ZM20.9384 7.29546L21.6792 7.17814V7.17814L20.9384 7.29546ZM10.5496 3.4776C10.2184 3.72636 10.1516 4.19651 10.4003 4.5277C10.6491 4.8589 11.1192 4.92571 11.4504 4.67695L10.5496 3.4776ZM11.4504 19.4783C11.1192 19.2296 10.6491 19.2964 10.4003 19.6276C10.1516 19.9588 10.2184 20.4289 10.5496 20.6777L11.4504 19.4783ZM3 11.3276C2.58579 11.3276 2.25 11.6634 2.25 12.0776C2.25 12.4919 2.58579 12.8276 3 12.8276L3 11.3276ZM16 12.0776V11.3276V12.0776ZM12.534 15.49C12.2095 15.7473 12.155 16.219 12.4123 16.5436C12.6697 16.8682 13.1414 16.9227 13.466 16.6653L12.534 15.49ZM14.763 14.6798L14.297 14.0921L14.763 14.6798ZM14.763 9.47548L14.297 10.0632L14.763 9.47548ZM13.466 7.48995C13.1414 7.23261 12.6697 7.2871 12.4123 7.61167C12.155 7.93624 12.2095 8.40797 12.534 8.66532L13.466 7.48995ZM16.9801 12.3283L17.7208 12.4463L17.7208 12.4463L16.9801 12.3283ZM16.9801 11.827L17.7208 11.709L17.7208 11.709L16.9801 11.827ZM14 3.82764L15 3.82764V2.32764L14 2.32764V3.82764ZM20.25 9.07764V15.0776H21.75V9.07764H20.25ZM15 20.3276H14V21.8276H15V20.3276ZM20.25 15.0776C20.25 16.0353 20.2477 16.4268 20.1977 16.7425L21.6792 16.9771C21.7523 16.5155 21.75 15.978 21.75 15.0776H20.25ZM15 21.8276C15.9003 21.8276 16.4378 21.83 16.8995 21.7568L16.6648 20.2753C16.3492 20.3253 15.9577 20.3276 15 20.3276V21.8276ZM20.1977 16.7425C19.9096 18.561 18.4834 19.9873 16.6648 20.2753L16.8995 21.7568C19.3599 21.3672 21.2895 19.4375 21.6792 16.9771L20.1977 16.7425ZM15 3.82764C15.9577 3.82764 16.3492 3.82996 16.6648 3.87996L16.8995 2.39843C16.4378 2.32531 15.9003 2.32764 15 2.32764V3.82764ZM21.75 9.07764C21.75 8.17729 21.7523 7.6398 21.6792 7.17814L20.1977 7.41279C20.2477 7.72846 20.25 8.11997 20.25 9.07764H21.75ZM16.6648 3.87996C18.4834 4.16799 19.9096 5.59425 20.1977 7.41279L21.6792 7.17814C21.2895 4.71776 19.3599 2.78811 16.8995 2.39843L16.6648 3.87996ZM14 2.32764C12.7064 2.32764 11.5106 2.7557 10.5496 3.4776L11.4504 4.67695C12.1607 4.14346 13.0424 3.82764 14 3.82764V2.32764ZM14 20.3276C13.0424 20.3276 12.1607 20.0118 11.4504 19.4783L10.5496 20.6777C11.5106 21.3996 12.7064 21.8276 14 21.8276V20.3276ZM3 12.8276L16 12.8276V11.3276L3 11.3276L3 12.8276ZM13.466 16.6653L15.2289 15.2675L14.297 14.0921L12.534 15.49L13.466 16.6653ZM15.2289 8.8878L13.466 7.48995L12.534 8.66532L14.297 10.0632L15.2289 8.8878ZM15.2289 15.2675C15.9176 14.7215 16.4852 14.2729 16.8875 13.8721C17.2932 13.468 17.6294 13.0195 17.7208 12.4463L16.2395 12.2103C16.2225 12.3165 16.1532 12.4863 15.8289 12.8094C15.5012 13.1359 15.0143 13.5233 14.297 14.0921L15.2289 15.2675ZM14.297 10.0632C15.0143 10.6319 15.5012 11.0194 15.8289 11.3459C16.1532 11.669 16.2225 11.8388 16.2395 11.945L17.7208 11.709C17.6294 11.1358 17.2932 10.6873 16.8875 10.2831C16.4852 9.88238 15.9175 9.43379 15.2289 8.8878L14.297 10.0632ZM17.7208 12.4463C17.7402 12.3242 17.75 12.201 17.75 12.0776H16.25C16.25 12.1217 16.2465 12.166 16.2395 12.2103L17.7208 12.4463ZM17.75 12.0776C17.75 11.9543 17.7402 11.8311 17.7208 11.709L16.2395 11.945C16.2465 11.9893 16.25 12.0336 16.25 12.0776H17.75ZM16 12.8276H17V11.3276H16V12.8276Z" fill="#059784" />
      </svg>
    )
  },
];

const Nav: React.FC = () => {
  const navigate = useNavigate(); // برای تغییر مسیر استفاده می‌شود
  const location = useLocation(); // برای دریافت مسیر فعلی استفاده می‌شود
  const [isOpen, setIsOpen] = useState(false); // مدیریت وضعیت باز یا بسته بودن منو

  // تابع برای باز و بسته کردن منو
  const toggleMenu = () => {
    setIsOpen(!isOpen);
  };

  // تابع برای بستن منو
  const closeMenu = () => {
    setIsOpen(false);
  };

  return (
    <>
      {/* دکمه همبرگری برای باز کردن منو */}
      <button className="hamburger-btn" onClick={toggleMenu}>
        {isOpen ? (
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="#004D08" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
          </svg>
        ) : (
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12H21M3 6H21M3 18H21" stroke="#004D08" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        )}
      </button>

      {/* لایه پس‌زمینه برای بستن منو */}
      <div className={`nav-overlay ${isOpen ? 'open' : ''}`} onClick={closeMenu}></div>

      {/* کانتینر اصلی منو */}
      <nav className={`nav-container ${isOpen ? 'open' : ''}`} style={{ zIndex: 10 }}>
        {/* لوگوی منو */}
        <div className="nav-logo">
          <img src={logo} alt="Logo" />
        </div>

        {/* آیتم‌های منو */}
        <div className="nav-items">
          {navItems.map(({ title, path, icon }) => (
            <div
              key={path} // کلید یکتا برای هر آیتم
              className={`nav-item ${location.pathname === path ? 'active' : ''}`} // اضافه کردن کلاس فعال برای مسیر فعلی
              onClick={() => {
                if (title === 'خروج') {
                  localStorage.removeItem('token');
                }
                navigate(path); // تغییر مسیر
                closeMenu(); // بستن منو
              }}
            >
              {icon} {/* نمایش آیکون */}
              <p className="nav-text">{title}</p> {/* نمایش عنوان */}
            </div>
          ))}
        </div>
      </nav>
    </>
  );
};

export default Nav;